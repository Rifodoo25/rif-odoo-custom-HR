<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Apply Now buttons -->
    <template id="apply_now_buttons" inherit_id="website_hr_recruitment.detail">
        <!-- First Apply Now button (top right) -->
        <xpath expr="//div[hasclass('container')]//div[hasclass('text-center')]/a[hasclass('btn-primary')]" position="attributes">
            <attribute name="t-att-href">'/jobs/apply/auth/' + slug(job)</attribute>
        </xpath>
        
        <!-- Second Apply Now button (bottom section) -->
        <xpath expr="//section[hasclass('o_job_bottom_bar')]//a[hasclass('btn-primary')]" position="attributes">
            <attribute name="t-att-href">'/jobs/apply/auth/' + slug(job)</attribute>
        </xpath>
    </template>

    <!-- Login prompt message -->
    <template id="apply_login_prompt" inherit_id="website_hr_recruitment.detail">
        <xpath expr="//div[hasclass('container') and .//h1]" position="after">
            <div class="alert alert-info mt-3" t-if="not request.env.user.has_group('base.group_user')">
                <i class="fa fa-info-circle me-2"></i>
                Please <a href="/web/login?redirect=/jobs/apply/%s" t-att-href="'/web/login?redirect=/jobs/apply/' + slug(job)">sign in</a> or 
                <a href="/web/signup?redirect=/jobs/apply/%s" t-att-href="'/web/signup?redirect=/jobs/apply/' + slug(job)">create an account</a> to apply.
            </div>
        </xpath>
    </template>

    <!-- Custom login page message - version independent -->
    <template id="login_message" inherit_id="web.login">
        <xpath expr="//form" position="before">
            <t t-if="job_title">
                <div class="alert alert-info mb-4">
                    <i class="fa fa-info-circle me-2"></i>
                    You're applying for: <strong t-esc="job_title"/>
                </div>
            </t>
        </xpath>
    </template>

</odoo>